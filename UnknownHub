-- Unknown Hub
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer

local mainGui = Instance.new("ScreenGui")
mainGui.Name = "UnknownHub"
mainGui.ResetOnSpawn = false

pcall(function()
	if syn and syn.protect_gui then
		syn.protect_gui(mainGui)
	elseif protectgui then
		protectgui(mainGui)
	end
end)

mainGui.Parent = gethui() or player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 180, 0, 200)
frame.Position = UDim2.new(0, 20, 0, 20)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
frame.BorderSizePixel = 0
frame.Active = true
frame.Parent = mainGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.Text = "Unknown Hub"
title.TextColor3 = Color3.fromRGB(255, 100, 100)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.Parent = frame

local speedToggle = Instance.new("TextButton")
speedToggle.Size = UDim2.new(0.8, 0, 0, 25)
speedToggle.Position = UDim2.new(0.1, 0, 0.17, 0)
speedToggle.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
speedToggle.Text = "SPEED: OFF"
speedToggle.TextColor3 = Color3.fromRGB(255,255,255)
speedToggle.Font = Enum.Font.GothamBold
speedToggle.TextSize = 12
speedToggle.Parent = frame

local baseToggle = Instance.new("TextButton")
baseToggle.Size = UDim2.new(0.8, 0, 0, 25)
baseToggle.Position = UDim2.new(0.1, 0, 0.32, 0)
baseToggle.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
baseToggle.Text = "BASE: OFF"
baseToggle.TextColor3 = Color3.fromRGB(255,255,255)
baseToggle.Font = Enum.Font.GothamBold
baseToggle.TextSize = 12
baseToggle.Parent = frame

local batToggle = Instance.new("TextButton")
batToggle.Size = UDim2.new(0.8, 0, 0, 25)
batToggle.Position = UDim2.new(0.1, 0, 0.47, 0)
batToggle.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
batToggle.Text = "BAT: OFF"
batToggle.TextColor3 = Color3.fromRGB(255,255,255)
batToggle.Font = Enum.Font.GothamBold
batToggle.TextSize = 12
batToggle.Parent = frame

local auraToggle = Instance.new("TextButton")
auraToggle.Size = UDim2.new(0.8, 0, 0, 25)
auraToggle.Position = UDim2.new(0.1, 0, 0.62, 0)
auraToggle.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
auraToggle.Text = "AURA: OFF"
auraToggle.TextColor3 = Color3.fromRGB(255,255,255)
auraToggle.Font = Enum.Font.GothamBold
auraToggle.TextSize = 12
auraToggle.Parent = frame

local fpsButton = Instance.new("TextButton")
fpsButton.Size = UDim2.new(0.8, 0, 0, 25)
fpsButton.Position = UDim2.new(0.1, 0, 0.77, 0)
fpsButton.BackgroundColor3 = Color3.fromRGB(100, 100, 180)
fpsButton.Text = "ANTI LAG"
fpsButton.TextColor3 = Color3.fromRGB(255,255,255)
fpsButton.Font = Enum.Font.GothamBold
fpsButton.TextSize = 12
fpsButton.Parent = frame

local discord = Instance.new("TextButton")
discord.Size = UDim2.new(0.9, 0, 0, 18)
discord.Position = UDim2.new(0.05, 0, 0.93, 0)
discord.BackgroundTransparency = 1
discord.Text = "discord.gg/Tz54xwc3fc"
discord.TextColor3 = Color3.fromRGB(150, 180, 255)
discord.Font = Enum.Font.Gotham
discord.TextSize = 10
discord.Parent = frame

for _, btn in ipairs({speedToggle, baseToggle, batToggle, auraToggle, fpsButton}) do
	local btnCorner = Instance.new("UICorner")
	btnCorner.CornerRadius = UDim.new(0, 5)
	btnCorner.Parent = btn
end

local speedEnabled = false
local baseEnabled = false
local batEnabled = false
local auraEnabled = false
local currentBat = nil
local lastBatName = ""
local SPEED = 29
local BASE_SPEED = 55
local aura = nil

local dragging = false
local dragStart
local startPos

local function updateDrag(input)
	if dragging then
		local delta = input.Position - dragStart
		frame.Position = UDim2.new(
			startPos.X.Scale,
			startPos.X.Offset + delta.X,
			startPos.Y.Scale,
			startPos.Y.Offset + delta.Y
		)
	end
end

title.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = frame.Position
		frame.BackgroundTransparency = 0.3
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
				frame.BackgroundTransparency = 0
			end
		end)
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		updateDrag(input)
	end
end)

local function findBat()
	local backpack = player:FindFirstChild("Backpack")
	if not backpack then return nil end
	
	for _, tool in ipairs(backpack:GetChildren()) do
		if tool:IsA("Tool") then
			local nameLower = tool.Name:lower()
			if nameLower:find("bat") then
				return tool
			end
		end
	end
	
	return nil
end

local function equipBat()
	local bat = findBat()
	if bat then
		bat.Parent = player.Character
		return bat
	end
	return nil
end

local function removeFpsDevourers(character)
	for _, v in pairs(character:GetDescendants()) do
		if v:IsA("Accessory") or v:IsA("Shirt") or v:IsA("Pants") or v:IsA("ShirtGraphic") or v:IsA("CharacterMesh") then
			v:Destroy()
		elseif v:IsA("BodyColors") then
			v:Destroy()
		elseif v:IsA("Decal") and v.Parent.Name == "Head" then
			v:Destroy()
		end
	end
end

local function createAura()
	if aura then aura:Destroy() end
	
	aura = Instance.new("Part")
	aura.Shape = Enum.PartType.Cylinder
	aura.Size = Vector3.new(0.5, 10, 10)
	aura.Material = Enum.Material.Neon
	aura.Color = Color3.fromRGB(255, 0, 0)
	aura.Transparency = 0.7
	aura.Anchored = true
	aura.CanCollide = false
	aura.Parent = workspace
end

RunService.Heartbeat:Connect(function()
	local char = player.Character
	if not char then return end
	
	local hum = char:FindFirstChildOfClass("Humanoid")
	local hrp = char:FindFirstChild("HumanoidRootPart")
	if not hum or not hrp then return end
	
	if auraEnabled and aura then
		aura.CFrame = hrp.CFrame * CFrame.new(0, 0, -5) * CFrame.Angles(0, 0, math.rad(90))
	elseif aura then
		aura.CFrame = CFrame.new(0, -999, 0)
	end
	
	if speedEnabled and hum.MoveDirection.Magnitude > 0 and not batEnabled then
		hrp.Velocity = Vector3.new(
			hum.MoveDirection.X * SPEED,
			hrp.Velocity.Y,
			hum.MoveDirection.Z * SPEED
		)
	end
	
	if baseEnabled and hum.MoveDirection.Magnitude > 0 and not batEnabled then
		hrp.Velocity = Vector3.new(
			hum.MoveDirection.X * BASE_SPEED,
			hrp.Velocity.Y,
			hum.MoveDirection.Z * BASE_SPEED
		)
	end
	
	if batEnabled then
		if not currentBat or not currentBat:IsDescendantOf(char) then
			if lastBatName ~= "" then
				local backpack = player:FindFirstChild("Backpack")
				if backpack then
					for _, tool in ipairs(backpack:GetChildren()) do
						if tool:IsA("Tool") and tool.Name:lower():find("bat") then
							currentBat = tool
							currentBat.Parent = char
							break
						end
					end
				end
			else
				currentBat = equipBat()
				if currentBat then
					lastBatName = currentBat.Name:lower()
				end
			end
		end
		
		if currentBat and currentBat:IsDescendantOf(char) then
			currentBat:Activate()
			
			local remote = currentBat:FindFirstChildOfClass("RemoteEvent")
			if remote then
				pcall(function()
					remote:FireServer()
				end)
			end
		end
	end
end)

speedToggle.MouseButton1Click:Connect(function()
	speedEnabled = not speedEnabled
	baseEnabled = false
	baseToggle.Text = "BASE: OFF"
	baseToggle.BackgroundColor3 = Color3.fromRGB(180,50,50)
	
	if speedEnabled then
		speedToggle.Text = "SPEED: ON"
		speedToggle.BackgroundColor3 = Color3.fromRGB(50,180,50)
	else
		speedToggle.Text = "SPEED: OFF"
		speedToggle.BackgroundColor3 = Color3.fromRGB(180,50,50)
	end
end)

baseToggle.MouseButton1Click:Connect(function()
	baseEnabled = not baseEnabled
	speedEnabled = false
	speedToggle.Text = "SPEED: OFF"
	speedToggle.BackgroundColor3 = Color3.fromRGB(180,50,50)
	
	if baseEnabled then
		baseToggle.Text = "BASE: ON"
		baseToggle.BackgroundColor3 = Color3.fromRGB(50,180,50)
	else
		baseToggle.Text = "BASE: OFF"
		baseToggle.BackgroundColor3 = Color3.fromRGB(180,50,50)
	end
end)

batToggle.MouseButton1Click:Connect(function()
	batEnabled = not batEnabled
	
	if batEnabled then
		currentBat = equipBat()
		if currentBat then
			lastBatName = currentBat.Name:lower()
			batToggle.Text = "BAT: ON"
		else
			batToggle.Text = "BAT: NO BAT"
		end
		batToggle.BackgroundColor3 = Color3.fromRGB(50,180,50)
	else
		batToggle.Text = "BAT: OFF"
		batToggle.BackgroundColor3 = Color3.fromRGB(180,50,50)
		currentBat = nil
		lastBatName = ""
	end
end)

auraToggle.MouseButton1Click:Connect(function()
	auraEnabled = not auraEnabled
	
	if auraEnabled then
		createAura()
		auraToggle.Text = "AURA: ON"
		auraToggle.BackgroundColor3 = Color3.fromRGB(50,180,50)
	else
		auraToggle.Text = "AURA: OFF"
		auraToggle.BackgroundColor3 = Color3.fromRGB(180,50,50)
		if aura then
			aura:Destroy()
			aura = nil
		end
	end
end)

fpsButton.MouseButton1Click:Connect(function()
	for _, p in pairs(Players:GetPlayers()) do
		if p.Character then
			removeFpsDevourers(p.Character)
		end
	end
	
	Players.PlayerAdded:Connect(function(p)
		p.CharacterAdded:Connect(function(character)
			task.wait(0.5)
			removeFpsDevourers(character)
		end)
	end)
	
	for _, p in pairs(Players:GetPlayers()) do
		p.CharacterAdded:Connect(function(character)
			task.wait(0.5)
			removeFpsDevourers(character)
		end)
	end
	
	fpsButton.Text = "APPLIED"
	task.wait(1)
	fpsButton.Text = "ANTI LAG"
end)

discord.MouseButton1Click:Connect(function()
	pcall(function()
		setclipboard("https://discord.gg/Tz54xwc3fc")
	end)
	local original = discord.Text
	discord.Text = "COPIED!"
	task.wait(1)
	discord.Text = original
end)

player.CharacterAdded:Connect(function()
	if batEnabled then
		batEnabled = false
		batToggle.Text = "BAT: OFF"
		batToggle.BackgroundColor3 = Color3.fromRGB(180,50,50)
		currentBat = nil
		lastBatName = ""
	end
	if auraEnabled then
		createAura()
	end
end)
